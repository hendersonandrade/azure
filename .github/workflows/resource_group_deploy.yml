name: Validate Resource Group Template

on:
  push:
    branches: [ "main" ]

  workflow_dispatch:

jobs:
  ValidateTemplate_ResourceGroup:    
    runs-on: ubuntu-latest    
    steps:
      - name: Checkout
        uses: actions/checkout@main
        with:
          ref: develop
        
      - name: Validate ARM Template
        uses: microsoft/action-armttk@0.0.5
        with:         
          github_token: ${{ github.token }}
          glob_pattern: "**/*.json"
          workdir: templates/ResourceGroup/
          tool_name: armttk
          level: error
          reporter: github-pr-check
          filter_mode: added
          fail_on_error: true
          reviewdog_flags: bug          
